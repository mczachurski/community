@using SunLine.Community.Web.Extensions
@model SunLine.Community.Web.ViewModels.Users.ProfileViewModel

@{
    ViewBag.Title = "Observing";
}

@Html.Partial("_UserProfilePartial")

@section Modals {
    @Html.Partial("_UserMessageModalsPartial")
	@Html.Partial("_UserMessageGalleryPartial")
}

@section Scripts {
    @Scripts.Render("~/bundles/usermessage")
    @Scripts.Render("~/bundles/userprofile")
    @Scripts.Render("~/bundles/userconnection")

    <script type="text/javascript">

        var userMessage = new SunLine.Community.UserMessage();
        userMessage.Init({
            TransmitUrl: '@Url.Action("Transmit", "Messages")',
            FavouriteUrl: '@Url.Action("Favourite", "Messages")',
            FavouriteCommentUrl: '@Url.Action("FavouriteComment", "Messages")',
            ToggleConnectionUrl: '@Url.Action("ToggleConnection", "Users")',
            PopoverUrl: '@Url.Action("Popover", "Users")',
            BubbleUrl: '@Url.Action("Bubble", "Messages")',
            DeleteMessageUrl: '@Url.Action("Delete", "Messages")'
        });

        var userProfile = new SunLine.Community.UserProfile();
        userProfile.Init({
        	UserId: '@Model.User.Id',
            ToggleConnectionUrl: '@Url.Action("ToggleConnection", "Users")',
            TimelineUrl: '@Url.Action("TimelineAjax", "Users")',
            ObserversUrl: '@Url.Action("ObserversAjax", "Users")',
            ObservingUrl: '@Url.Action("ObservingAjax", "Users")'
        });

        var userConnection = new SunLine.Community.UserConnection();
        userConnection.Init({
            ToggleConnectionUrl: '@Url.Action("ToggleConnection", "Users")'
        });

    </script>
}