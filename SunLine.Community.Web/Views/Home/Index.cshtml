@using SunLine.Community.Resources.Titles
@model SunLine.Community.Web.ViewModels.Messages.TimelineViewModel

@{
    ViewBag.Title = "Your Feed";
}

@Html.Partial("_UserMessagesPartial", Model)

@section Modals {
    @Html.Partial("_UserMessageModalsPartial")
    @Html.Partial("_UserMessageGalleryPartial")
}

@section Head {
    @Styles.Render("~/Scripts/dropzone/css/dropzone")
    @Styles.Render("~/Content/blueimp/blueimp")
}

@section Scripts {
    @Scripts.Render("~/bundles/usermessage")
    @Scripts.Render("~/bundles/dropzone")
    @Scripts.Render("~/bundles/blueimp")

    <script type="text/javascript">
    var userMessage = new SunLine.Community.UserMessage();
    userMessage.Init({
        TransmitUrl: '@Url.Action("Transmit", "Messages")',
        FavouriteUrl: '@Url.Action("Favourite", "Messages")',
        FavouriteCommentUrl: '@Url.Action("FavouriteComment", "Messages")',
        ToggleConnectionUrl: '@Url.Action("ToggleConnection", "Users")',
        PopoverUrl: '@Url.Action("Popover", "Users")',
        BubbleUrl: '@Url.Action("Bubble", "Messages")',
        DeleteMessageUrl: '@Url.Action("Delete", "Messages")',
        FileUploadUrl: '@Url.Action("SaveUploadedFile", "Messages")',
        ErrorWhileSendingTransmitMessage: '@SpeechesMessage.ErrorWhileSendingTransmit',
        MessageWasRemovedMessage: '@SpeechesMessage.MessageWasRemoved',
        ErrorWhileDeletingMessage: '@SpeechesMessage.ErrorWhileDeletingMessage',
        ErrorWhileBubblingMessage: '@SpeechesMessage.ErrorWhileBubbling',
        ErrorWhileFavouriteMessage: '@SpeechesMessage.ErrorWhileFavourite',
        ErrorWhileFavouriteCommentMessage: '@SpeechesMessage.ErrorWhileFavouriteComment',
        ErrorWhileAddingCommentMessage: '@SpeechesMessage.ErrorWhileAddingComment',
        ErrorWhileAddingMindMessage: '@SpeechesMessage.ErrorWhileAddingMind',
        ErrorWhileChangingConnectionMessage: '@UsersMessage.ErrorWhileChangingConnection',
        ConnectionWasCreatedMessage: '@UsersMessage.ConnectionWasCreated',
        ConnectionWasRemovedMessage: '@UsersMessage.ConnectionWasRemoved',
        ErrorWhilePublishSpeechMessage: '@SpeechesMessage.ErrorWhilePublishSpeech',
        SpeechWasPublishedMessage: '@SpeechesMessage.SpeechWasPublished'
    });

    userMessage.InitializeDropzone();

    </script>
}